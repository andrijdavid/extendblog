var accounting=function(){function r(r){return!!(""===r||r&&r.charCodeAt&&r.substr)}function n(r){return h?h(r):"[object Array]"===d.call(r)}function e(r){return"[object Object]"===d.call(r)}function t(r,n){for(var e in n)n.hasOwnProperty(e)&&null==r[e]&&(r[e]=n[e]);return r}function o(r,n,e){var t,o,a=[];if(!r)return a;if(m&&r.map===m)return r.map(n,e);for(t=0,o=r.length;o>t;t++)a[t]=n.call(e,r[t],t,r);return a}function a(r,n){return r=Math.round(Math.abs(r)),isNaN(r)?n:r}function u(n){var e=f.currency.format;return"function"==typeof n&&(n=n()),r(n)&&n.match("%v")?{pos:n,neg:n.replace("-","").replace("%v","-%v"),zero:n}:n&&n.pos&&n.pos.match("%v")?n:r(e)?f.currency.format={pos:e,neg:e.replace("%v","-%v"),zero:e}:e}function c(r,e){if(n(r))return o(r,function(r){return c(r,e)});var e=e||".",t=parseFloat((""+(r||0)).replace(RegExp("[^0-9-"+e+"]",["g"]),"").replace(e,"."));return isNaN(t)?0:t}function i(r,n){var n=a(n,f.number.precision),e=Math.pow(10,n);return(Math.round(r*e)/e).toFixed(n)}function s(r,u,l,p){if(n(r))return o(r,function(r){return s(r,u,l,p)});var r=c(r),m=t(e(u)?u:{precision:u,thousand:l,decimal:p},f.number),h=a(m.precision),d=0>r?"-":"",b=parseInt(i(Math.abs(r||0),h),10)+"",y=b.length>3?b.length%3:0;return d+(y?b.substr(0,y)+m.thousand:"")+b.substr(y).replace(/(\d{3})(?=\d)/g,"$1"+m.thousand)+(h?m.decimal+i(Math.abs(r),h).split(".")[1]:"")}function l(r,i,p,m,h,d){if(n(r))return o(r,function(r){return l(r,i,p,m,h,d)});var r=c(r),b=t(e(i)?i:{symbol:i,precision:p,thousand:m,decimal:h,format:d},f.currency),y=u(b.format);return(r>0?y.pos:0>r?y.neg:y.zero).replace("%s",b.symbol).replace("%v",s(Math.abs(r),a(b.precision),b.thousand,b.decimal))}function p(i,l,m,h,d,b){if(!i)return[];var y=t(e(l)?l:{symbol:l,precision:m,thousand:h,decimal:d,format:b},f.currency),g=u(y.format),v=g.pos.indexOf("%s")<g.pos.indexOf("%v")?!0:!1,M=0,i=o(i,function(r){return n(r)?p(r,y):(r=c(r),r=(r>0?g.pos:0>r?g.neg:g.zero).replace("%s",y.symbol).replace("%v",s(Math.abs(r),a(y.precision),y.thousand,y.decimal)),r.length>M&&(M=r.length),r)});return o(i,function(n){return r(n)&&n.length<M?v?n.replace(y.symbol,y.symbol+Array(M-n.length+1).join(" ")):Array(M-n.length+1).join(" ")+n:n})}var f={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}},m=Array.prototype.map,h=Array.isArray,d=Object.prototype.toString;return{settings:f,formatMoney:l,formatNumber:s,formatColumn:p,toFixed:i,unformat:c}}();